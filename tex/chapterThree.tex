\chapter{Reimplementation of IPM in Ltac2}

tutorial-style

take an example and work it out in Ltac2

\section{Iris Proof Mode setup}

Explain what is IPM, judgements, tactics as proof rules for the judgment


\subsection{Rules for regular IPM}

\todo{MoSeL paper only has a handful of them, so maybe it makes sense to put all here for comparison with "splitting" ones later?}

\begin{itemize}
\item Start proof
\item Context maninputation
  \begin{itemize}
  \item iRename
  \item iClear
  \item iEval
  \end{itemize}
\item Assumptions
  \begin{itemize}
  \item iExact
  \item iAssumption
  \end{itemize}
\item Intuitionistic/Spatail/Pure transitions
  \begin{itemize}
  \item iIntuitionistic
  \item iSpatial
  \item iPure
  \item iEmpIntro
  \item iPureIntro
  \end{itemize}
\item iFrame
\item Intro of wand/implication
\item Revert
\item Specialize and Pose
\item Apply
\item Existential
  \begin{itemize}
  \item Intro
  \item Destruct
  \end{itemize}
\item Modalities
\item iDestruct
\item iIntros
\item Induction
\item Löb
\item Assert
\item Rewrite
\end{itemize}

\paragraph{Tactics compose}

\section{IPM from implementaion persprective}

Example to use: iAssumption?
\begin{itemize}
\item Typeclasses\\
  \verb|Affine|, \verb|AffineEnv|
\item Coq tactics\\
  \verb|tac_assumption|\\
  Requires typeclasses -- \verb|FromAssumption true P Q|,\\
  \verb|TCOr (Absorbing Q) (AffineEnv (env_spatial Δ))|
\item Ltac(1/2) tactics\\
  Uses iAssumptionCoq, so some composability.
\end{itemize}
\todo{How to implement tactic in IPM, how does IPM work}


\section{Examples of Ltac2 features are/can be used}

\paragraph{Fix arities from original IPM}

\paragraph{Error messages}

\begin{itemize}
\item nested exceptions, rethrowing errors, example: iintros uses idestruct
\item there's more to do here -- I haven't touched Typeclass search yet and not sure there's much I can do in general
\end{itemize}

\section{Missing from Ltac2: notations for intropatterns, user-defined scopes?}

\paragraph{Interop between Ltac1 and Ltac2?}
i.e. iris indent-string has to go through the goal to get the result from one to another