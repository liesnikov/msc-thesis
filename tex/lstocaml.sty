% Configuring listings for OCaml.

% Comments in blue.
\newcommand{\ocamlcommentstyle}{\color{blue}}

\lstdefinelanguage{OCaml}[Objective]{Caml}{
  % Fix errors in the default definition of ocaml.
  deletekeywords={closed,ref},
  morekeywords={initializer},
  % General settings.
  % curly quotes
  upquote=true,
  % Size of tabulations
  tabsize=3,
  %
  % Enables ASCII chars 128 to 255
  extendedchars=false,
  %
  % Case sensitivity
  sensitive=true,
  %
  % Automatic breaking of long lines
  breaklines=false,
  %
  % Default style fors listings
  basicstyle=\small,
  %
  % Position of captions is bottom
  captionpos=b,
  %
  % flexible columns
  basewidth={2em, 0.5em},
  columns=[l]flexible,
  %
  commentstyle=\ocamlcommentstyle,
  % By default, we use a small font.
  basicstyle=\small,
  % Style for (listings') identifiers
  identifierstyle={\ttfamily\color{black}},
  % Style for declaration keywords
  keywordstyle=[1]{\ttfamily\bfseries\color{dkviolet}},
  % Style for gallina keywords
  keywordstyle=[2]{\ttfamily\bfseries\color{dkgreen}},
  % Style for sorts keywords
  keywordstyle=[3]{\ttfamily\bfseries\color{ltblue}},
  % Style for tactics keywords
  keywordstyle=[4]{\ttfamily\color{dkblue}},
  % Style for terminators keywords
  keywordstyle=[5]{\ttfamily\color{dkred}},
  % Style for iterators
  % keywordstyle=[6]{\ttfamily\color{dkpink}},
  % Style for strings
  stringstyle=\ttfamily,
  % Style for comments
  commentstyle={\ttfamily\itshape\color{dkgreen}},
  % LaTeX escape.
  escapeinside={$}{$},
  literate=
    {->}{{$\rightarrow\,\,\,\,$}}1
%
}[keywords,comments,strings]

\lstnewenvironment{ocaml}{\lstset{language=OCaml}}{}
% An abbreviation for \lstinline, with a normal font size.
% To be used in the text of the paper.
\def\ocamle{\lstinline[language=ocaml,basicstyle=\small]}
